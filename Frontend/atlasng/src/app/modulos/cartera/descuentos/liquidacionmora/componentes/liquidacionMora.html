<div class="f-acciones-cabecera ui-g ui-fluid">
  <acciones-cabecera [componente]="componentehijo"></acciones-cabecera>
</div>

<div class="f-contenedor-transaccion">
  <form #formFiltros="ngForm" class="f-filtros ui-g ui-fluid shadow-box ui-shadow-1 f-center-items">
    <div class="ui-g-12 ui-g-nopad">
      <div class="ui-g-12 ui-md-1">
        <label for="fcpersona" class="ui-outputlabel required">Persona</label>
      </div>
      <div class="ui-g-12 ui-md-2">
        <input id="fidentificacion" name="fidentificacion" type="text" pInputText [ngModel]="mcampos.identificacion"
          required [readOnly]="true" />
      </div>
      <div class="ui-g-12 ui-md-5">
        <input type="text" pInputText id="npersona" name="npersona" [(ngModel)]="mcampos.nombre" [readOnly]="true" />
      </div>
      <div class="ui-g-12 ui-md-2">
        <button pButton type="button" id="lovpersona" name="lovpersona" (click)="mostrarLovPersona()" icon="ui-icon-directions"></button>
        <button pButton type="button" id="lovpersonavista" name="lovpersonavista" (click)="mostrarLovPersonaVista()"
          icon="ui-icon-person" *ngIf="!estaVacio(mcampos.cpersona)"></button>
      </div>
      <app-lov-personas (eventoCliente)=fijarLovPersonaSelec($event)></app-lov-personas>
      <app-lov-persona-vista></app-lov-persona-vista>
    </div>
    <div class="ui-g-12 ui-g-nopad">
      <div class="ui-g-12 ui-md-1">
        <label for="fpk" class="ui-outputlabel required">Operación</label>
      </div>
      <div class="ui-g-2 ui-md-2">
        <input id="fcoperacion" name="fcoperacion" type="text" pInputText [(ngModel)]="mcampos.coperacion" required
          [readOnly]="true" />
      </div>
      <div class="ui-g-9 ui-md-5">
        <input type="text" pInputText id="ntipoprod" name="ntipoprod" [(ngModel)]="mcampos.ntipoprod" [readOnly]="true" />
      </div>
      <div class="ui-g-1 ui-md-1">
        <button pButton type="button" id="lovoperacion" name="lovoperacion" (click)="mostrarLovOperacion()" icon="ui-icon-directions"></button>
      </div>
      <app-lov-operacion-cartera (eventoOperCartera)=fijarLovOperacionSelec($event)></app-lov-operacion-cartera>
    </div>
  
  </form>
</div>

<p-tabView>
  <p-tabPanel header="Datos Liquidación">
    <div class="f-datacontent ui-g ui-fluid">
      <div class="ui-g-12">
        <p-fieldset legend="Datos Operación">
          <div class="ui-g-12 ui-md-6 ui-g-nopad">
            <div class="ui-g-12 ui-md-4">
              <label for="montooriginal" class="ui-outputlabel">Monto original:</label>
            </div>
            <div class="ui-g-12 ui-md-3">
              <input id="montooriginal" name="montooriginal" type="text" pInputText [(ngModel)]="mcampos.montooriginal"
                [disabled]="true" numero required />
            </div>
          </div>
          <div class="ui-g-12 ui-md-6 ui-g-nopad">
            <div class="ui-g-12 ui-md-4">
              <label for="porcentaje" class="ui-outputlabel">Porcentaje pago:</label>
            </div>
            <div class="ui-g-12 ui-md-3">
              <input id="porcentaje" name="porcentaje" type="text" pInputText [(ngModel)]="mcampos.porcentaje" numero
                [disabled]="true" required />
            </div>
          </div>
          <div class="ui-g-12 ui-md-6 ui-g-nopad">
            <div class="ui-g-12 ui-md-4">
              <label for="saldo" class="ui-outputlabel">Saldo:</label>
            </div>
            <div class="ui-g-12 ui-md-3">
              <input id="saldo" name="saldo" type="text" pInputText [(ngModel)]="mcampos.saldo" numero required
                [disabled]="true" />
            </div>
          </div>
          <div class="ui-g-12 ui-md-6 ui-g-nopad">
            <div class="ui-g-12 ui-md-4">
              <label for="valorvencido" class="ui-outputlabel">Valor vencido:</label>
            </div>
            <div class="ui-g-12 ui-md-3">
              <input id="valorvencido" name="valorvencido" type="text" pInputText [(ngModel)]="mcampos.valorvencido"
                numero [disabled]="true" required />
            </div>
          </div>
        </p-fieldset>
      </div>
      <div class="ui-g-12"></div>
      <div class="ui-g-12">
        <p-fieldset legend="Datos Expediente">
          <div class="ui-g-12 ui-md-6 ui-g-nopad">
            <div class="ui-g-12 ui-md-4">
              <label for="ntipo" class="ui-outputlabel">Tipo:</label>
            </div>
            <div class="ui-g-12 ui-md-6">
              <label for="mdatosntipo" class="ui-outputlabel" *ngIf="!estaVacio(nocobrado.mdatos)">{{nocobrado.mdatos.ntipo}}</label>
            </div>
          </div>
          <div class="ui-g-12 ui-md-6 ui-g-nopad"> </div>
          <div class="ui-g-12 ui-md-6 ui-g-nopad">
            <div class="ui-g-12 ui-md-4">
              <label for="totalaportes" class="ui-outputlabel">Total aportes:</label>
            </div>
            <div class="ui-g-12 ui-md-3">
              <input id="totalaportes" name="totalaportes" type="text" pInputText [(ngModel)]="nocobrado.taportes"
                numero [disabled]="true" required />
            </div>
          </div>
          <div class="ui-g-12 ui-md-6 ui-g-nopad">
            <div class="ui-g-12 ui-md-4">
              <label for="numeroaportes" class="ui-outputlabel">Número aportes:</label>
            </div>
            <div class="ui-g-12 ui-md-3">
              <input id="numeroaportes" name="numeroaportes" type="text" pInputText [(ngModel)]="nocobrado.numaportaciones"
                entero required [disabled]="true" />
            </div>
          </div>
          <div class="ui-g-12 ui-md-6 ui-g-nopad">
            <div class="ui-g-12 ui-md-4">
              <label for="valorrecibir" class="ui-outputlabel">Valor a recibir:</label>
            </div>
            <div class="ui-g-12 ui-md-3">
              <input id="valorrecibir" name="valorrecibir" type="text" pInputText [(ngModel)]="nocobrado.totalliquidacion"
                numero [disabled]="true" style="background-color:  #328CC1; color: #FFFFFF" required />
            </div>
          </div>
        </p-fieldset>
      </div>
      <div class="ui-g-12"></div>
      <div class="ui-g-12">
        <p-fieldset legend="Datos Liquidación">
          <div class="ui-g-12 ui-md-6 ui-g-nopad">
            <div class="ui-g-12 ui-md-4">
              <label for="numdocumento" class="ui-outputlabel required">Número oficio:</label>
            </div>
            <div class="ui-g-12 ui-md-6">
              <input id="numdocumento" name="numdocumento" type="text" pInputText [(ngModel)]="mcampos.numerooficio"
                mayusculas required />
            </div>
          </div>
          <div class="ui-g-12 ui-md-6 ui-g-nopad">
            <div class="ui-g-12 ui-md-4">
              <label for="fecha" class="ui-outputlabel required">Fecha oficio:</label>
            </div>
            <div class="ui-g-12 ui-md-6">
              <p-calendar id="fecha" name="fecha" [(ngModel)]="mcampos.fechaoficio" [showIcon]="true" [dateFormat]="formatofecha"
                required></p-calendar>
            </div>
          </div>
          <div class="ui-g-12 ui-g-nopad">
            <div class="ui-g-12 ui-md-2">
              <label for="novedad" class="ui-outputlabel required">Comentario:</label>
            </div>
            <div class="ui-g-12 ui-md-9">
              <textarea pInputText id="novedad" name="novedad" [(ngModel)]="mcampos.novedad" required mayusculas
                maxlength="500" rows="2" [disabled]="!editable"></textarea>
            </div>
          </div>
        </p-fieldset>
      </div>
      <div class="ui-g-12"></div>
      <div class="ui-g-12"></div>
      <div class="f-datacontent ui-g ui-fluid f-center-items">
        <div class="ui-g-12 ui-md-8 ui-lg-5 ui-g-nopad ui-datatable ui-datatable-header, body ui-datatable ui-datatable-footer">
          <p-dataTable [value]="lregistros" [responsive]="true" [resizableColumns]="false" rowGroupMode="subheader">
            <p-header>
              <div class="ui-table-title">Registro de Pago</div>
            </p-header>
            <p-column field="nombre" header="Rubro"></p-column>
            <p-column header="Monto">
              <ng-template pTemplate="body" let-reg="rowData">
                <input type="text" pInputText [(ngModel)]="reg.monto" numero maxlength="16" style="text-align:right"
                  (ngModelChange)="actualizarMonto(reg.monto)" />
              </ng-template>
            </p-column>
            <ng-template pTemplate="rowgroupfooter">
              <td colspan="1" style="text-align:left">TOTAL</td>
              <td style="text-align:right">{{rqMantenimiento.monto | number:'1.2-2' }}</td>
            </ng-template>
          </p-dataTable>
        </div>
      </div>
    </div>
  </p-tabPanel>
</p-tabView>
